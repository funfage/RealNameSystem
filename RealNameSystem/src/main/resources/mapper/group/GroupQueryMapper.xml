<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.real.name.group.service.repository.GroupQueryMapper">
    <resultMap id="queryMap" type="com.real.name.group.entity.WorkerGroup">
        <id property="teamSysNo" column="team_sys_no"/>
        <result property="projectCode" column="project_code"/>
        <result property="teamName" column="team_name"/>
        <result property="corpCode" column="corp_code"/>
        <result property="corpName" column="corp_name"/>
        <result property="entryAttachments" column="entry_attachments"/>
        <result property="entryTime" column="entry_time"/>
        <result property="exitAttachments" column="exit_attachments"/>
        <result property="exitTime" column="exit_time"/>
        <result property="isAdminGroup" column="is_admin_group"/>
        <result property="remark" column="remark"/>
        <result property="responsiblePersonIdCardType" column="responsible_person_id_card_type"/>
        <result property="responsiblePersonIdNumber" column="responsible_person_id_number"/>
        <result property="responsiblePersonIdCardType" column="responsible_person_id_card_type"/>
        <result property="responsiblePersonName" column="responsible_person_name"/>
        <result property="responsiblePersonPhone" column="responsible_person_phone"/>
    </resultMap>

    <sql id="groupSql">
        wg.team_sys_no, wg.project_code, wg.corp_code, wg.corp_name, wg.team_name, wg.responsible_person_name,
        wg.responsible_person_phone, wg.responsible_person_id_card_type, wg.responsible_person_id_number,
        wg.remark, wg.entry_time, wg.exit_time, wg.entry_attachments, wg.exit_attachments, wg.is_admin_group
    </sql>

    <select id="searchGroup" resultMap="queryMap">
        select
        <include refid="groupSql"/>
        from
        worker_group wg
        <where>
            <if test="groupQuery.teamSysNo != null">
                and wg.team_sys_no = #{groupQuery.teamSysNo}
            </if>
            <if test="groupQuery.projectCode != null">
                and wg.project_code = #{groupQuery.projectCode}
            </if>
        </where>
    </select>

</mapper>